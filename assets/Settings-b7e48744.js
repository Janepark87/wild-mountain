import{r as q,j as e,S as V,$ as M,a0 as m,a1 as g,C as v,R as G,H as U}from"./index-bf703710.js";import{u as y}from"./index.esm-76036237.js";import{u as T,a as F}from"./useSetting-077c0f64.js";function I(){var x,h,f,c;const{settings:d={},isSettingLoading:b}=T(),{minBookingLength:k,maxBookingLength:p,maxGuestsPerBooking:B,breakfastPrice:j}=d,{register:i,formState:{errors:a},trigger:L}=y(),{updateSettingMutate:P}=F(),[r,l]=q.useState({minBookingLength:!1,maxBookingLength:!1,maxGuestsPerBooking:!1,breakfastPrice:!1}),n=async o=>{const{value:u,name:t,defaultValue:S}=o.target;!u||!t||S===u||!await L(t)||(l(s=>({...s,[t]:!0})),P({[t]:u},{onSuccess:()=>{l(s=>({...s,[t]:!1})),o.target.defaultValue=u},onError:()=>{l(s=>({...s,[t]:!1}))}}))};return b||!d?e.jsx(V,{}):e.jsxs(M,{children:[e.jsx(m,{label:"Minimum nights/booking",error:(x=a==null?void 0:a.minBookingLength)==null?void 0:x.message,children:e.jsx(g,{type:"number",id:"min-nights",disabled:r.minBookingLength,defaultValue:k,...i("minBookingLength",{required:"The minimun number of booking is required.",min:{value:1,message:"Must be greater than 1."},onBlur:n})})}),e.jsx(m,{label:"Maximum nights/booking",error:(h=a==null?void 0:a.maxBookingLength)==null?void 0:h.message,children:e.jsx(g,{type:"number",id:"max-nights",name:"maxBookingLength",disabled:r.maxBookingLength,defaultValue:p,...i("maxBookingLength",{required:"The maximum number of booking is required.",max:{value:90,message:"The maximum booking duration should not exceed 90 nights."},min:{value:1,message:"Must be greater than 1."},onBlur:n})})}),e.jsx(m,{label:"Maximum guests/booking",error:(f=a==null?void 0:a.maxGuestsPerBooking)==null?void 0:f.message,children:e.jsx(g,{type:"number",id:"max-guests",name:"maxGuestsPerBooking",disabled:r.maxGuestsPerBooking,defaultValue:B,onBlur:o=>n(o),...i("maxGuestsPerBooking",{required:"The maximum number of guests is required.",min:{value:1,message:"Must be greater than 1!"},onBlur:n})})}),e.jsx(m,{label:"Breakfast price",error:(c=a==null?void 0:a.breakfastPrice)==null?void 0:c.message,children:e.jsx(g,{type:"number",id:"breakfast-price",name:"breakfastPrice",disabled:r.breakfastPrice,defaultValue:j,...i("breakfastPrice",{required:"Breakfast price is required!",min:{value:1,message:"The price must be greater than $1."},onBlur:n})})})]})}function H(){return e.jsxs(v,{children:[e.jsx(G,{children:e.jsx(U,{as:"h1",children:"Update hotel settings"})}),e.jsx(I,{})]})}export{H as default};
