import{j as e,S as C,D as a,T as o,P as b,B as p,o as D,e as w,p as B,M as h,q as v,v as M,w as T,x as S,y as A,C as N,R as P,H}from"./index-bf703710.js";import{c as R,d as $,e as u,f as m,h as E,A as F,j as O,k as q}from"./TodayCheckInOutActivity.style-39a73841.js";import{a as f,f as U}from"./helpers-ae338a96.js";import{S as z}from"./SortBy-5402a9cf.js";import"./useSetting-077c0f64.js";function G(){const{bookings:s,isBookingLoading:i,count:n}=R();return i?e.jsx(C,{}):e.jsx(a,{children:e.jsxs(o,{columns:"0.6fr 2.5fr repeat(3, 1.5fr) repeat(2, 2fr) repeat(2, 1fr)",children:[e.jsxs(o.Header,{children:[e.jsx("span",{children:"Cabin"}),e.jsx("span",{children:"Guest"}),e.jsx("span",{children:"Check in"}),e.jsx("span",{children:"Check out"}),e.jsx("span",{children:"Details"}),e.jsx("span",{children:"Status"}),e.jsx("span",{children:"Amount"}),e.jsx("span",{children:"Paid"}),e.jsx("span",{})]}),e.jsx(o.Body,{data:s,dataName:"bookings",render:t=>e.jsx(L,{booking:t},t.id)}),e.jsx(o.Footer,{children:e.jsx(b,{count:n})})]})})}function L({booking:s}){const{id:i,startDate:n,endDate:t,numNights:l,numGuests:r,totalPrice:c,status:d,isPaid:x,guests:{fullName:g,email:k},cabins:{name:y}}=s,j={unconfirmed:"blue","checked-in":"green","checked-out":"silver",true:"green",false:"grey"};return e.jsxs(o.Row,{role:"row",children:[e.jsx($,{children:y}),e.jsxs(u,{children:[e.jsx("span",{children:g}),e.jsx("span",{children:k})]}),e.jsxs(u,{children:[e.jsx("span",{children:m(new Date(n),"MMM dd, yyyy")}),e.jsx("span",{children:E(new Date(n))?`${f(n)} (today)`:f(n)})]}),e.jsx("span",{style:{fontWeight:"500"},children:m(new Date(t),"MMM dd, yyyy")}),e.jsxs(u,{children:[e.jsxs("span",{children:[l," night",l>1?"s":""]}),e.jsxs("span",{children:[r," guest",r>1?"s":""]})]}),e.jsx(p,{$variant:j[d],children:d.replace("-"," ")}),e.jsx(F,{children:U(c)}),e.jsx(p,{$variant:j[x],children:x?"Paid":"Not yet"}),e.jsx(J,{bookingId:i,status:d})]})}function W(){return e.jsxs(D,{children:[e.jsx(w,{filterField:"status",options:[{value:"all",label:"All"},{value:"checked-in",label:"Checked in"},{value:"checked-out",label:"Checked out"},{value:"unconfirmed",label:"Unconfirmed"}]}),e.jsx(z,{options:[{value:"totalPrice-asc",label:"Amount (low first)"},{value:"totalPrice-desc",label:"Amount (high first)"},{value:"startDate-asc",label:"Date (earlier first)"},{value:"startDate-desc",label:"Date (recent first)"}]})]})}function J({bookingId:s,status:i}){const n=B(),{updateCheckoutMutate:t,isCheckoutUpdating:l}=O(),{deleteBookingMutate:r,isBookingDeleting:c}=q();return e.jsx(a.Inner,{children:e.jsxs(h,{children:[e.jsx(a.Trigger,{id:s}),e.jsxs(a.List,{id:s,children:[e.jsx(a.Item,{icon:e.jsx(v,{}),onClick:()=>n(`/bookings/${s}`),children:"See details"}),i==="unconfirmed"&&e.jsx(a.Item,{icon:e.jsx(M,{}),onClick:()=>n(`/checkin/${s}`),children:"Check in"}),i==="checked-in"&&e.jsx(a.Item,{icon:e.jsx(T,{}),onClick:()=>t(s),disabled:l,children:"Check out"}),e.jsx(h.Trigger,{type:"booking-delete-confirmation",children:e.jsx(a.Item,{icon:e.jsx(S,{}),onClick:()=>r(s),disabled:c,children:"Delete"})})]}),e.jsx(h.Window,{type:"booking-delete-confirmation",children:e.jsx(A,{resource:`Booking #${s}`,disabled:c,onConfirm:()=>r(s)})})]})})}function Z(){return e.jsxs(N,{type:"table-container",size:"xl",children:[e.jsxs(P,{type:"horizontal",children:[e.jsx(H,{as:"h1",children:"Bookings"}),e.jsx(W,{})]}),e.jsx(G,{})]})}export{Z as default};
